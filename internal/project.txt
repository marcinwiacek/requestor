<!doctype html>
<html>
<head>
    <script src="../external/split.min.js"></script>
    <link href="../external/tabulator_midnight.min.css" rel="stylesheet">
    <script type="text/javascript" src="../external/tabulator.min.js"></script>

    <style>
        .flex {
            display: flex;
            flex-direction: row;
        }

        .flex>.split {
            height: 100vh;
            overflow-y: scroll;
        }

        .gutter.gutter-horizontal {
            cursor: ew-resize;
        }

        .gutter {
            background-color: #eee;
            background-repeat: no-repeat;
            background-position: 50%;
        }

        .gutter.gutter-horizontal {
            background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAUAAAAeCAYAAADkftS9AAAAIklEQVQoU2M4c+bMfxAGAgYYmwGrIIiDjrELjpo5aiZeMwF+yNnOs5KSvgAAAABJRU5ErkJggg==');
        }

        .heading {
            padding: 15px;
            background: #eeeeee;
            text-align: center;
            font-weight: 800;
            color: #0062cc;
            letter-spacing: 2px;
        }

	ul {
    	    list-style-type: none;
    	     margin:0;
    	    padding:0;
	}

	li {
    	    margin-left:17px;
	}

	.file {
    	    display: block;
    	    list-style: none;
	}

	.folder {
    	    list-style: none;
            cursor: pointer;

	    > ul {
        	display: none;
    	    }
	}
    
	.folder-open {
    	    > ul {
        	display: block;
        	padding-left: 15px;
        	margin-left: 9px;
        	border-left: 2px solid $color-grey;
    	    }
	}
</style>
<script>

function createPOST() {
  var http = new XMLHttpRequest();
  var url = window.location.protocol + '/' + '/' + window.location.hostname + ':' + window.location.port + window.location.pathname;
  http.open('POST', url, true);
  http.setRequestHeader('Content-type', 'application/x-www-form-urlencoded');
  return http;
}

function loadRightPart(url) {
  http = createPOST();
  http.onload = function() {
    if (http.status != 200) {
      alert(http.response);
    }

    var tmp=  document.createElement('div');
    tmp.innerHTML = http.response;
    const scriptElements = tmp.querySelectorAll("script");
    Array.from(scriptElements).forEach((scriptElement) => {
      const clonedElement = document.createElement("script");
      Array.from(scriptElement.attributes).forEach((attribute) => {
        clonedElement.setAttribute(attribute.name, attribute.value);
      });
      clonedElement.text = scriptElement.text;
      scriptElement.parentNode.replaceChild(clonedElement, scriptElement);
    });
    document.getElementById("two").innerHTML="";
    document.getElementById("two").appendChild(tmp);
  }

  http.onerror = function() {
    alert('login error');
  };

  const params = new URLSearchParams(window.location.search);
  http.send(url);
  return false;
}

</script>
</head>
<body>
<a href=.>back</a><p>
File: <!--NAME-->
<p>
<form>
Environment:
<select name="environment" id="environment">
<!--ENV-->
</select>
</form>
<div class="flex">
  <div id="one" class="split">
     <!--TC-->
  </div>
  <div id="two" class="split">
    <!--OBIEKT-->
    <!--RUN-->
  </div>
</div>

<script>

Split(['#one', '#two'], {
    sizes: [20, 80]
});

var toggler = document.getElementsByClassName("folder");
for (var i = 0; i < toggler.length; i++) {
  const node = document.createElement("a");
  node.innerHTML = toggler[i].classList.contains("folder-open")?"\u25BC ":"\u25B6 ";
  node.addEventListener("click", function() {
      this.innerHTML = this.innerHTML=="\u25B6 "?"\u25BC ":"\u25B6 ";
      this.parentElement.classList.toggle("folder-open");
  });
  toggler[i].prepend(node);
} 

</script>
</body>
</html>
